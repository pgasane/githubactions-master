name: Building # Nombre del WorkFlow
on: [push]
  push:
    tags:
      - "v*.*.*". # Se ejecuta solo cuando hay etiqueta de versión 
jobs: # Solo vamos a ejecutar uno
  building:F
    runs-on: ubuntu-latest
    steps: 
      - uses: actions/checkout@v3         # Checkout para copiar el Repositorio. Ejemplos: github.com/actions/checkout, github.com/actions/setup-python  
      - uses: actions/setup-python@v4     # Definimos versión python 4 como requisito 
        with:
          python-version: '3.10'
      - name: Install Poetry                # Instalamos Poetry 
        uses: snok/install-poetry@v1        # Forzamos la instalación de Poetry versión 1
      - name: Install dependencies
        run: poetry install
      - name: Testing
        run: poetry run pytest
      - run: poetry build                   # Ejecutamos poetry build en la consola del repositorio
      - run: ls ${{ github.workspace }}     # Ejecuto el comando ls ${{ github.workspace }} en consola en la ruta del repositorio. Un ls del workspace, en este caso. Importante: ${{ github.workspace }}
      - name: Publish to GH Releases
        uses: softprops/action-gh-release@v1
        with:
          files: ${{ github.workspace }}/dist/* # Subimos todos los binarios. name: nombre_cualquiera. # Parámetros obligatorios. Ha dado error por lo que los hemos añadido después.
          # LO COMENTAMOS PARA HACERLO DE FORMA CORRECTA. # tag_name: etiqueta_cualquiera # Parámetros obligatorios. Ha dado error por lo que los hemos añadido después. 
          # LO COMENTAMOS PARA HACERLO DE FORMA CORRECTA. Las Etiquetas una vez creadas NO SE DEBEN MODIFICAR para garantizar la veracidad de las versiones. La versión se establece
          # en pyproject.toml dentro de la carpeta del proyecto
          #name: cualquier #tag_name: cualquier

